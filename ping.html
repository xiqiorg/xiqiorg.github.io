<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ping测试</title>
    <style>
        body {
            background-color: #f7f8fa;
            font-family: 'PingFang SC', 'Helvetica Neue', Arial, sans-serif;
            color: #333;
            font-size: 14px;
            line-height: 1.5;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            box-sizing: border-box;
            background-color: #fff;
            border-radius: 4px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            font-size: 28px;
            font-weight: bold;
            margin-top: 0;
            margin-bottom: 20px;
        }

        label {
            font-weight: bold;
            display: block;
            margin-bottom: 10px;
        }

        input[type=text] {
            width: 100%;
            padding: 10px;
            border: 2px solid #e3e6e9;
            border-radius: 5px;
            background-color: #f7f8fa;
            font-size: 16px;
            margin-bottom: 20px;
        }

        button {
            background-color: #007bff;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease-in-out;
        }

        button:hover {
            background-color: #0062cc;
        }

        .ping-results {
            margin-top: 20px;
            border-top: 1px solid #e3e6e9;
            padding-top: 20px;
        }

        .ping-results h2 {
            font-size: 18px;
            font-weight: bold;
            margin-top: 0;
            margin-bottom: 10px;
        }

        .ping-results p {
            margin-bottom: 10px;
        }

        .ping-results ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .ping-results li:before {
            content: "\f105";
            font-family: FontAwesome;
            margin-right: 10px;
            color: #007bff;
        }
    </style>
    <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
<div class="container">
    <h1>Ping测试</h1>
    <form id="ping-form">
        <label for="url-input">请输入URL：</label>
        <input type="text" id="url-input" name="url" placeholder="例如：www.google.com">
        <button type="submit">开始测试</button>
    </form>

    <div class="ping-results" id="ping-results" style="display: none;">
        <h2>测试结果</h2>
        <p><i class="fa fa-laptop" aria-hidden="true"></i> 主机：<span id="host"></span></p>
        <p><i class="fa fa-globe" aria-hidden="true"></i> IP地址：<span id="ip"></span></p>
        <p><i class="fa fa-bar-chart" aria-hidden="true"></i> 请求次数：<span id="count"></span></p>
        <p><i class="fa fa-clock-o" aria-hidden="true"></i> 最小延迟：<span id="min"></span></p>
        <p><i class="fa fa-clock-o" aria-hidden="true"></i> 最大延迟：<span id="max"></span></p>

        <div id="ip-list" style="display: none;">
            <h3>IP列表：</h3>
            <ul id="ip-ul"></ul>
        </div>
    </div>
</div>

<script>
    const form = document.getElementById('ping-form');
    const results = document.getElementById('ping-results');

    form.addEventListener('submit', function (event) {
        event.preventDefault();
        const url = form.elements['url'].value.trim();
        if (!url) return;

        fetch(`http://ovoa.cc/api/ping.php?url=${encodeURIComponent(url)}`)
            .then(response => response.json())
            .then(data => {
                const host = data.data.host;
                const ip = data.data.ip;
                const count = data.data.count;
                const min = data.data.ping_time_min;
                const max = data.data.ping_time_max;
                const listIp = data.list_ip;

                document.getElementById('host').textContent = host;
                document.getElementById('ip').textContent = ip;
                document.getElementById('count').textContent = count;
                document.getElementById('min').textContent = min;
                document.getElementById('max').textContent = max;

                if (listIp && listIp.length > 0) {
                    document.getElementById('ip-list').style.display = 'block';
                    const ul = document.getElementById('ip-ul');
                    ul.innerHTML = '';
                    listIp.forEach(ip => {
                        const li = document.createElement('li');
                        li.textContent = ip;
                        ul.appendChild(li);
                    });
                }

                results.style.display = 'block';
            })
            .catch(error => console.log(error));
    });
</script>
</body>
</html>
